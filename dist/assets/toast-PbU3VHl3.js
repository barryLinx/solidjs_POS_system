import{$ as g,l as M,m as U,n as B,c as C,o as F,h as H}from"./index-doT_xdeQ.js";const k=Symbol("store-raw"),A=Symbol("store-node"),f=Symbol("store-has"),v=Symbol("store-self");function V(t){let e=t[g];if(!e&&(Object.defineProperty(t,g,{value:e=new Proxy(t,X)}),!Array.isArray(t))){const n=Object.keys(t),o=Object.getOwnPropertyDescriptors(t);for(let s=0,i=n.length;s<i;s++){const r=n[s];o[r].get&&Object.defineProperty(t,r,{enumerable:o[r].enumerable,get:o[r].get.bind(e)})}}return e}function h(t){let e;return t!=null&&typeof t=="object"&&(t[g]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function b(t,e=new Set){let n,o,s,i;if(n=t!=null&&t[k])return n;if(!h(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let r=0,u=t.length;r<u;r++)s=t[r],(o=b(s,e))!==s&&(t[r]=o)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const r=Object.keys(t),u=Object.getOwnPropertyDescriptors(t);for(let a=0,T=r.length;a<T;a++)i=r[a],!u[i].get&&(s=t[i],(o=b(s,e))!==s&&(t[i]=o))}return t}function I(t,e){let n=t[e];return n||Object.defineProperty(t,e,{value:n=Object.create(null)}),n}function P(t,e,n){if(t[e])return t[e];const[o,s]=C(n,{equals:!1,internal:!0});return o.$=s,t[e]=o}function q(t,e){const n=Reflect.getOwnPropertyDescriptor(t,e);return!n||n.get||!n.configurable||e===g||e===A||(delete n.value,delete n.writable,n.get=()=>t[g][e]),n}function z(t){U()&&P(I(t,A),v)()}function Q(t){return z(t),Reflect.ownKeys(t)}const X={get(t,e,n){if(e===k)return t;if(e===g)return n;if(e===M)return z(t),n;const o=I(t,A),s=o[e];let i=s?s():t[e];if(e===A||e===f||e==="__proto__")return i;if(!s){const r=Object.getOwnPropertyDescriptor(t,e);U()&&(typeof i!="function"||t.hasOwnProperty(e))&&!(r&&r.get)&&(i=P(o,e,i)())}return h(i)?V(i):i},has(t,e){return e===k||e===g||e===M||e===A||e===f||e==="__proto__"?!0:(U()&&P(I(t,f),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:Q,getOwnPropertyDescriptor:q};function D(t,e,n,o=!1){if(!o&&t[e]===n)return;const s=t[e],i=t.length;n===void 0?(delete t[e],t[f]&&t[f][e]&&s!==void 0&&t[f][e].$()):(t[e]=n,t[f]&&t[f][e]&&s===void 0&&t[f][e].$());let r=I(t,A),u;if((u=P(r,e,s))&&u.$(()=>n),Array.isArray(t)&&t.length!==i){for(let a=t.length;a<i;a++)(u=r[a])&&u.$();(u=P(r,"length",i))&&u.$(t.length)}(u=r[v])&&u.$()}function W(t,e){const n=Object.keys(e);for(let o=0;o<n.length;o+=1){const s=n[o];D(t,s,e[s])}}function G(t,e){if(typeof e=="function"&&(e=e(t)),e=b(e),Array.isArray(e)){if(t===e)return;let n=0,o=e.length;for(;n<o;n++){const s=e[n];t[n]!==s&&D(t,n,s)}D(t,"length",o)}else W(t,e)}function p(t,e,n=[]){let o,s=t;if(e.length>1){o=e.shift();const r=typeof o,u=Array.isArray(t);if(Array.isArray(o)){for(let a=0;a<o.length;a++)p(t,[o[a]].concat(e),n);return}else if(u&&r==="function"){for(let a=0;a<t.length;a++)o(t[a],a)&&p(t,[a].concat(e),n);return}else if(u&&r==="object"){const{from:a=0,to:T=t.length-1,by:Y=1}=o;for(let j=a;j<=T;j+=Y)p(t,[j].concat(e),n);return}else if(e.length>1){p(t[o],e,[o].concat(n));return}s=t[o],n=[o].concat(n)}let i=e[0];typeof i=="function"&&(i=i(s,n),i===s)||o===void 0&&i==null||(i=b(i),o===void 0||h(s)&&h(i)&&!Array.isArray(i)?W(s,i):D(t,o,i))}function J(...[t,e]){const n=b(t||{}),o=Array.isArray(n),s=V(n);function i(...r){B(()=>{o&&r.length===1?G(n,r[0]):p(n,r)})}return[s,i]}const $=new WeakMap,K={get(t,e){if(e===k)return t;const n=t[e];let o;return h(n)?$.get(n)||($.set(n,o=new Proxy(n,K)),o):n},set(t,e,n){return D(t,e,b(n)),!0},deleteProperty(t,e){return D(t,e,void 0,!0),!0}};function w(t){return e=>{if(h(e)){let n;(n=$.get(e))||$.set(e,n=new Proxy(e,K)),t(n)}return e}}const Z=t=>typeof t=="function",N=(t,e)=>Z(t)?t(e):t;var c;(function(t){t[t.ADD_TOAST=0]="ADD_TOAST",t[t.UPDATE_TOAST=1]="UPDATE_TOAST",t[t.UPSERT_TOAST=2]="UPSERT_TOAST",t[t.DISMISS_TOAST=3]="DISMISS_TOAST",t[t.REMOVE_TOAST=4]="REMOVE_TOAST",t[t.START_PAUSE=5]="START_PAUSE",t[t.END_PAUSE=6]="END_PAUSE"})(c||(c={}));const[y,S]=J({toasts:[],pausedAt:void 0}),rt=()=>{const{pausedAt:t,toasts:e}=y;if(t)return;const n=Date.now();return e.map(s=>{if(s.duration===1/0)return;const i=(s.duration||0)+s.pauseDuration-(n-s.createdAt);if(i<=0){s.visible&&d({type:c.DISMISS_TOAST,toastId:s.id});return}return setTimeout(()=>{d({type:c.DISMISS_TOAST,toastId:s.id})},i)})},_=new Map,x=(t,e)=>{if(_.has(t))return;const n=setTimeout(()=>{_.delete(t),d({type:c.REMOVE_TOAST,toastId:t})},e);_.set(t,n)},tt=t=>{const e=_.get(t);_.delete(t),e&&clearTimeout(e)},d=t=>{switch(t.type){case c.ADD_TOAST:S("toasts",s=>{const i=s;return[t.toast,...i]});break;case c.DISMISS_TOAST:const{toastId:e}=t,n=y.toasts;if(e){const s=n.find(i=>i.id===e);s&&x(e,s.unmountDelay),S("toasts",i=>i.id===e,w(i=>i.visible=!1))}else n.forEach(s=>{x(s.id,s.unmountDelay)}),S("toasts",s=>s.id!==void 0,w(s=>s.visible=!1));break;case c.REMOVE_TOAST:if(!t.toastId){S("toasts",[]);break}S("toasts",s=>s.filter(r=>r.id!==t.toastId));break;case c.UPDATE_TOAST:t.toast.id&&tt(t.toast.id),S("toasts",s=>s.id===t.toast.id,s=>({...s,...t.toast}));break;case c.UPSERT_TOAST:y.toasts.find(s=>s.id===t.toast.id)?d({type:c.UPDATE_TOAST,toast:t.toast}):d({type:c.ADD_TOAST,toast:t.toast});break;case c.START_PAUSE:S(w(s=>{s.pausedAt=Date.now(),s.toasts.forEach(i=>{i.paused=!0})}));break;case c.END_PAUSE:const o=t.time-(y.pausedAt||0);S(w(s=>{s.pausedAt=void 0,s.toasts.forEach(i=>{i.pauseDuration+=o,i.paused=!1})}));break}},et={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},R={id:"",icon:"",unmountDelay:500,duration:3e3,ariaProps:{role:"status","aria-live":"polite"},className:"",style:{},position:"top-right",iconTheme:{}},L={position:"top-right",toastOptions:R,gutter:8,containerStyle:{},containerClassName:""},m="16px",at={position:"fixed","z-index":9999,top:m,bottom:m,left:m,right:m,"pointer-events":"none"},nt=(()=>{let t=0;return()=>String(++t)})(),ct=t=>{st(e=>({containerClassName:t.containerClassName??e.containerClassName,containerStyle:t.containerStyle??e.containerStyle,gutter:t.gutter??e.gutter,position:t.position??e.position,toastOptions:{...t.toastOptions}}))},ut=(t,e)=>{const o=t.includes("top")?{top:0,"margin-top":`${e}px`}:{bottom:0,"margin-bottom":`${e}px`},s=t.includes("center")?{"justify-content":"center"}:t.includes("right")?{"justify-content":"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:"all 230ms cubic-bezier(.21,1.02,.73,1)",...o,...s}},lt=(t,e)=>{const n=t.getBoundingClientRect();n.height!==e.height&&d({type:c.UPDATE_TOAST,toast:{id:e.id,height:n.height}})},ft=(t,e)=>{const{toasts:n}=y,o=O().gutter||L.gutter||8,s=n.filter(a=>(a.position||e)===e&&a.height),i=s.findIndex(a=>a.id===t.id),r=s.filter((a,T)=>T<i&&a.visible).length;return s.slice(0,r).reduce((a,T)=>a+o+(T.height||0),0)},dt=(t,e)=>(t.position||e).includes("top")?1:-1,[O,st]=C(L),ot=(t,e="blank",n)=>{var o,s,i;return{...R,...O().toastOptions,...n,type:e,message:t,pauseDuration:0,createdAt:Date.now(),visible:!0,id:n.id||nt(),paused:!1,style:{...R.style,...(o=O().toastOptions)==null?void 0:o.style,...n.style},duration:n.duration||((s=O().toastOptions)==null?void 0:s.duration)||et[e],position:n.position||((i=O().toastOptions)==null?void 0:i.position)||O().position||R.position}},E=t=>(e,n={})=>H(()=>{const o=y.toasts.find(i=>i.id===n.id),s=ot(e,t,{...o,duration:void 0,...n});return d({type:c.UPSERT_TOAST,toast:s}),s.id}),l=(t,e)=>E("blank")(t,e);F(()=>l);l.error=E("error");l.success=E("success");l.loading=E("loading");l.custom=E("custom");l.dismiss=t=>{d({type:c.DISMISS_TOAST,toastId:t})};l.promise=(t,e,n)=>{const o=l.loading(e.loading,{...n});return t.then(s=>(l.success(N(e.success,s),{id:o,...n}),s)).catch(s=>{l.error(N(e.error,s),{id:o,...n})}),t};l.remove=t=>{d({type:c.REMOVE_TOAST,toastId:t})};export{c as A,d as a,R as b,rt as c,at as d,ft as e,ut as f,dt as g,ct as m,N as r,y as s,l as t,lt as u};
