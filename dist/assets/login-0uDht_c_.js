import{c as b,u as $,a as y,d,g as _,t as w,f as S}from"./index-pEVPDpaW.js";import{c as k}from"./customFetch-KfsyJ-vQ.js";var x=w('<div class="container vh-100 vw-100"style="background-image:linear-gradient(to bottom right, #ff99ff, #ffff66);"><div class=box><h2>Signin</h2><form><div class=inputbox><input id=user type=text required><label for=user><i class="fas fa-user me-2"></i>工號</label></div><div class=inputbox><input id=pswd type=password required><label for=pswd><i class="fas fa-key me-2"></i>密碼</label></div><input class="w-100 fs-3"type=submit name=""value=送出>');function E(){const{localAccessToken:f,userName:i,setUserName:p,setLocalAccessToken:g}=S,[o,m]=b(""),r=$();y(()=>{f()&&r("/home",{replace:!0})});const v=async a=>{a.preventDefault();try{const e=await(await k("api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i(),password:o()})})).json();console.log("Login",e),localStorage.setItem("localAccessToken",e.accessToken),g(e.accessToken),r("/home",{replace:!0})}catch(s){console.error("Error fetching data:",s),r("/*404",{replace:!0})}};return(()=>{var a=x(),s=a.firstChild,e=s.firstChild,n=e.nextSibling,l=n.firstChild,c=l.firstChild,h=l.nextSibling,u=h.firstChild;return n.addEventListener("submit",t=>v(t)),c.$$input=t=>p(t.target.value),u.$$input=t=>m(t.target.value),d(()=>c.value=i()),d(()=>u.value=o()),a})()}_(["input"]);export{E as default};
